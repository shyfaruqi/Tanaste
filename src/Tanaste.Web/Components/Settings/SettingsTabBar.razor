@namespace Tanaste.Web.Components.Settings

@* Horizontal icon-tab navigation strip for the Settings page.
   Mirrors the Intent Dock's visual language — large icons with labels,
   glassmorphic background, active tab highlighted. *@

<MudPaper Elevation="0" Class="settings-tab-bar mb-6">
    <MudStack Row="true" Spacing="0" Justify="Justify.Center" AlignItems="AlignItems.Center">

        @foreach (var tab in _tabs)
        {
            <div class="settings-tab-item @(ActiveTab == tab.Value ? "active" : "")"
                 @onclick="@(() => SetTab(tab.Value))">
                <MudIcon Icon="@tab.Icon"
                         Size="Size.Large"
                         Color="@(ActiveTab == tab.Value ? Color.Primary : Color.Default)" />
                <MudText Typo="Typo.caption"
                         Style="@(ActiveTab == tab.Value
                             ? "color: var(--mud-palette-primary);"
                             : "color: var(--tanaste-text-muted);")">
                    @tab.Label
                </MudText>
            </div>
        }

    </MudStack>
</MudPaper>

@code {
    [Parameter] public SettingsTab ActiveTab { get; set; } = SettingsTab.General;
    [Parameter] public EventCallback<SettingsTab> OnTabChanged { get; set; }

    private async Task SetTab(SettingsTab tab)
    {
        ActiveTab = tab;
        await OnTabChanged.InvokeAsync(tab);
    }

    // Tab definitions — icon + label + enum value.
    private static readonly TabDef[] _tabs =
    [
        new(SettingsTab.General,       Icons.Material.Outlined.Settings,      "General"),
        new(SettingsTab.Folders,       Icons.Material.Outlined.FolderOpen,    "Folders"),
        new(SettingsTab.Providers,     Icons.Material.Outlined.Cloud,         "Providers"),
        new(SettingsTab.Security,      Icons.Material.Outlined.Shield,        "Security"),
        new(SettingsTab.Activity,      Icons.Material.Outlined.Timeline,      "Activity"),
        new(SettingsTab.Notifications, Icons.Material.Outlined.Notifications, "Alerts"),
    ];

    private sealed record TabDef(SettingsTab Value, string Icon, string Label);

    /// <summary>Settings page tab identifiers.</summary>
    public enum SettingsTab { General, Folders, Providers, Security, Activity, Notifications }
}

<style>
    .settings-tab-bar {
        background: var(--tanaste-glass-bg);
        border: 1px solid var(--tanaste-glass-border);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 24px;
        padding: 16px 32px;
    }

    .settings-tab-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        padding: 12px 24px;
        border-radius: 16px;
        cursor: pointer;
        transition: background 0.2s ease;
        user-select: none;
    }

    .settings-tab-item:hover {
        background: var(--tanaste-hover-overlay);
    }

    .settings-tab-item.active {
        background: var(--tanaste-active-overlay);
    }
</style>
